<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rick Dean">
<meta name="dcterms.date" content="2024-11-26">

<title>index</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script src="index_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="index_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">



<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup"><span class="header-section-number">2</span> Setup</a>
  <ul class="collapse">
  <li><a href="#load-the-required-r-packages-from-cran" id="toc-load-the-required-r-packages-from-cran" class="nav-link" data-scroll-target="#load-the-required-r-packages-from-cran"><span class="header-section-number">2.1</span> Load the Required R Packages from CRAN:</a></li>
  <li><a href="#load-the-required-r-packages-from-github" id="toc-load-the-required-r-packages-from-github" class="nav-link" data-scroll-target="#load-the-required-r-packages-from-github"><span class="header-section-number">2.2</span> Load the Required R Packages from GitHub:</a></li>
  <li><a href="#formulate-a-goal" id="toc-formulate-a-goal" class="nav-link" data-scroll-target="#formulate-a-goal"><span class="header-section-number">2.3</span> Formulate a goal</a></li>
  <li><a href="#find-the-dataset-and-variable-acronym-name-used-by-the-census-bureau-api" id="toc-find-the-dataset-and-variable-acronym-name-used-by-the-census-bureau-api" class="nav-link" data-scroll-target="#find-the-dataset-and-variable-acronym-name-used-by-the-census-bureau-api"><span class="header-section-number">2.4</span> Find the dataset and variable acronym name used by the Census Bureau API</a></li>
  <li><a href="#check-that-the-geography-is-available-in-the-dataset" id="toc-check-that-the-geography-is-available-in-the-dataset" class="nav-link" data-scroll-target="#check-that-the-geography-is-available-in-the-dataset"><span class="header-section-number">2.5</span> Check that the geography is available in the dataset</a></li>
  </ul></li>
  <li><a href="#download-the-data" id="toc-download-the-data" class="nav-link" data-scroll-target="#download-the-data"><span class="header-section-number">3</span> Download the data</a></li>
  <li><a href="#join-the-state-percentages-with-the-state-boundary-geometries" id="toc-join-the-state-percentages-with-the-state-boundary-geometries" class="nav-link" data-scroll-target="#join-the-state-percentages-with-the-state-boundary-geometries"><span class="header-section-number">4</span> Join the state percentages with the state boundary geometries</a></li>
  <li><a href="#compare-the-choropleth-map-for-computers-present-in-2013-with-2023" id="toc-compare-the-choropleth-map-for-computers-present-in-2013-with-2023" class="nav-link" data-scroll-target="#compare-the-choropleth-map-for-computers-present-in-2013-with-2023"><span class="header-section-number">5</span> Compare the choropleth map for computers present in 2013 with 2023</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">6</span> Conclusion</a></li>
  </ul>
<div class="quarto-other-links"><h2>Other Links</h2><ul><li><a href="https://github.com/deandevl/RcensusPkg"><i class="bi bi-link-45deg"></i>RcensusPkg</a></li><li><a href="https://github.com/deandevl"><i class="bi bi-link-45deg"></i>deandevl</a></li></ul></div><div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://github.com/deandevl/IntroToRcensusPkg"><i class="bi bi-github"></i>source</a></li></ul></div></nav>
</div>
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
</div>



<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rick Dean </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 26, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>Accessing the US Census Bureau’s database of survey data and map geometries via their API can be a challenge. The R package <a href="https://github.com/deandevl/RcensusPkg">RcensusPkg</a> can help by providing specific functions for checking on the availability of geographies, variables, datasets, and dates. In addition, the package provides easy access to the Bureau’s extensive Tiger Line map geometries and for joining the maps with Census Bureau survey data. Presented here is a basic step-by-step demonstration of how <a href="https://github.com/deandevl/RcensusPkg">RcensusPkg</a> could be applied. The example compares the percentage of computer presence across the states in 2013 with 2023. A series of highlighted ‘tasks’ are presented with steps to download the data, download the state geometries, join data with the state boundary geometries and finally create a choropleth states map visualization. The companion packages <a href="https://github.com/deandevl/RspatialPkg">RspatialPkg</a> and <a href="https://github.com/deandevl/RplotterPkg">RplotterPkg</a> are ggplot2 based R packages that create and map the visualization. As the researcher gains more knowledge of his/her subject, not all of the steps outlined here will be required.</p>
<p><a href="https://github.com/deandevl/RcensusPkg">RcensusPkg</a> is available for installation from <a href="https://github.com/deandevl/RcensusPkg">deandevl</a> github website. There are many additional demonstrations on the package at the <a href="https://github.com/deandevl/RcensusPkg">RcensusPkg’s</a> <strong>demo</strong> folder. Each function is demonstrated for downloading data and simple feature (sf) geometries. For additional applications see <a href="https://cb-anal.netlify.app/">Techniques in Acquisition, Computation, and Display of US Census Bureau Data</a> which uses <a href="https://github.com/deandevl/RcensusPkg">RcensusPkg</a> to follow the first nine chapters of Kyle Walker’s book <a href="https://walker-data.com/census-r/index.html">Analyzing US Census Data: Methods, Maps, and Models in R</a>.</p>
</section>
<section id="setup" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="setup"><span class="header-section-number">2</span> Setup</h2>
<p>Let’s load the required R script libraries from CRAN and github:</p>
<section id="load-the-required-r-packages-from-cran" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="load-the-required-r-packages-from-cran"><span class="header-section-number">2.1</span> Load the Required R Packages from CRAN:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usmap)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-the-required-r-packages-from-github" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="load-the-required-r-packages-from-github"><span class="header-section-number">2.2</span> Load the Required R Packages from GitHub:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"deandevl/RcensusPkg"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"deandevl/RspatialPkg"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"deandevl/RplotterPkg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="formulate-a-goal" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="formulate-a-goal"><span class="header-section-number">2.3</span> Formulate a goal</h3>
<p>Our first task is to:</p>
<div class="task">
<p>Formulate a goal that characterizes the types of variables and maps needed.</p>
</div>
<p>Our goal is to get Census Bureau annual survey percentages on computer ownership in households across the states. We want a recent year like 2023 and compare it with an earlier year such as 2013.</p>
</section>
<section id="find-the-dataset-and-variable-acronym-name-used-by-the-census-bureau-api" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="find-the-dataset-and-variable-acronym-name-used-by-the-census-bureau-api"><span class="header-section-number">2.4</span> Find the dataset and variable acronym name used by the Census Bureau API</h3>
<p>We are starting from ground zero where we know little about the availability of Census Bureau data or how to access it and put it together. So our next task is to:</p>
<div class="task">
<p>Do a general search at the US Census Bureau’s site to identify possible dataset sources.</p>
</div>
<p>An excellent place to start are the brief descriptions of all the Census Bureau API <a href="https://www.census.gov/data/developers/data-sets.html">datasets</a>. In addition, there is the Census Bureau’s <a href="https://data.census.gov/all">Explorer</a> with a column of filters on the far left and a list of <em>Tables</em>. The datasets such as the “American Community Survey” contain several <em>Tables</em> and <em>Tables</em> contain several data variables. Our goal is to find the dataset acronym that has computer related variables.</p>
<p>Using <a href="https://data.census.gov/all">Explorer</a> we see a “American Community Survey” dataset with a table named “DP02 Selected Social Characteristics in the United States”. When we click the link for the DP02 Table we get a listing of variables. As we scroll down the listing, you will find at the very end a sub-category “COMPUTERS AND INTERNET USE”. Two variables under the category have numbers for households “With a computer” and “With a broadband internet subscription”. We also see back toward the top of the page the name of the dataset as “American Community Survey” and the title “2023 ACS 1-Year Estimates Data Profiles”. It appears that this dataset and its title are what we are looking for.</p>
<p>Also at the top of the page is a note “American Community Survey 1-Year estimates are published for geographies with a population of 65,000 or more.” Since we will be using US state geographies, our percentage estimates should be accurate.</p>
<p>So we have a title, “2023 ACS 1-Year Estimates Data Profiles” under the “American Community Survey” dataset and a table (i.e.&nbsp;DP02) with our computer related variables. Our next task then:</p>
<div class="task">
<p>Determine the acronym that the Census Bureau API uses for the dataset “ACS 1-Year Estimates Data Profiles”.</p>
</div>
<p>To find the acronym we can use <code>RcensusPkg::get_dataset_names()</code> which returns a dataframe of dataset names. It has a parameter <em>filter_title_str</em> that filters the names by their title. So return all dataset names containing the “1-Year” string for all years/vintages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>acs_dataset_names_lst <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">get_dataset_names</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_title_str =</span> <span class="st">"1-year"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Census Bureau dataset names with ‘1-year’ titles</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vintage</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2013</td>
<td style="text-align: left;">ACS 1-Year Data Profiles</td>
</tr>
<tr class="even">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2014</td>
<td style="text-align: left;">ACS 1-Year Data Profiles</td>
</tr>
<tr class="odd">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2015</td>
<td style="text-align: left;">ACS 1-Year Data Profiles</td>
</tr>
<tr class="even">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2016</td>
<td style="text-align: left;">ACS 1-Year Data Profiles</td>
</tr>
<tr class="odd">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2017</td>
<td style="text-align: left;">ACS 1-Year Data Profiles</td>
</tr>
<tr class="even">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2018</td>
<td style="text-align: left;">ACS 1-Year Profile Tables</td>
</tr>
<tr class="odd">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2019</td>
<td style="text-align: left;">American Community Survey: 1-Year Estimates: Data Profiles 1-Year</td>
</tr>
<tr class="even">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2021</td>
<td style="text-align: left;">American Community Survey: 1-Year Estimates: Data Profiles 1-Year</td>
</tr>
<tr class="odd">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2022</td>
<td style="text-align: left;">American Community Survey: 1-Year Estimates: Data Profiles 1-Year</td>
</tr>
<tr class="even">
<td style="text-align: left;">acs/acs1/profile</td>
<td style="text-align: right;">2023</td>
<td style="text-align: left;">ACS 1-Year Data Profiles</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Among the “1-Year” surveys we find that the acronym name “acs/acs1/profile” has extensive years including our target years of 2013 and 2023.</p>
<p>With the dataset acronym name we now need to find the acronym for the “With a computer” variable under the “DP02 Selected Social Characteristics in the United States” table:</p>
<div class="task">
<p>Find the Census Bureau API’s acronym name for “With a computer” variable for 2023.</p>
</div>
<p>To find the acronym we can use <code>RcensusPkg::get_variable_names()</code> which returns a dataframe of filtered variables under a specific dataset and year(vintage) for a label or phrase such as “computers”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>DP02_2023_computers_dt <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">get_variable_names</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> <span class="st">"acs/acs1/profile"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">vintage =</span> <span class="dv">2023</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_label_str =</span> <span class="st">"computers"</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Computer related variables from US Census Bureau ACS profile 1-year survey, 2023</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">label</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">concept</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">required</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">predicateType</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">DP02_0152E</td>
<td style="text-align: left;">Estimate!!COMPUTERS AND INTERNET USE!!Total households</td>
<td style="text-align: left;">Selected Social Characteristics in the United States</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="even">
<td style="text-align: left;">DP02_0152PE</td>
<td style="text-align: left;">Percent!!COMPUTERS AND INTERNET USE!!Total households</td>
<td style="text-align: left;">Selected Social Characteristics in the United States</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DP02_0153E</td>
<td style="text-align: left;">Estimate!!COMPUTERS AND INTERNET USE!!Total households!!With a computer</td>
<td style="text-align: left;">Selected Social Characteristics in the United States</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="even">
<td style="text-align: left;">DP02_0153PE</td>
<td style="text-align: left;">Percent!!COMPUTERS AND INTERNET USE!!Total households!!With a computer</td>
<td style="text-align: left;">Selected Social Characteristics in the United States</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">float</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DP02_0154E</td>
<td style="text-align: left;">Estimate!!COMPUTERS AND INTERNET USE!!Total households!!With a broadband Internet subscription</td>
<td style="text-align: left;">Selected Social Characteristics in the United States</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="even">
<td style="text-align: left;">DP02_0154PE</td>
<td style="text-align: left;">Percent!!COMPUTERS AND INTERNET USE!!Total households!!With a broadband Internet subscription</td>
<td style="text-align: left;">Selected Social Characteristics in the United States</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">float</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>From the “concept” column we find “Percent!!COMPUTERS AND INTERNET USE!!Total households!!With a computer” and variable acronym of “DP02_0153PE”</p>
<p>Because the acronym names can change over time we need to check on the variable name for 2013.</p>
<div class="task">
<p>Find the Census Bureau API’s acronym name for “With a computer” variable for 2013.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>DP02_2013_computers_dt <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">get_variable_names</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> <span class="st">"acs/acs1/profile"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">vintage =</span> <span class="dv">2013</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter_label_str =</span> <span class="st">"computers"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Computer related variables from US Census Bureau ACS profile 1-year survey, 2013</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">label</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">concept</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">required</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">predicateType</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">DP02_0150E</td>
<td style="text-align: left;">Estimate!!COMPUTERS AND INTERNET USE!!Total Households</td>
<td style="text-align: left;">SELECTED SOCIAL CHARACTERISTICS IN THE UNITED STATES</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="even">
<td style="text-align: left;">DP02_0150PE</td>
<td style="text-align: left;">Percent!!COMPUTERS AND INTERNET USE!!Total Households</td>
<td style="text-align: left;">SELECTED SOCIAL CHARACTERISTICS IN THE UNITED STATES</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DP02_0151E</td>
<td style="text-align: left;">Estimate!!COMPUTERS AND INTERNET USE!!Total Households!!With a computer</td>
<td style="text-align: left;">SELECTED SOCIAL CHARACTERISTICS IN THE UNITED STATES</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="even">
<td style="text-align: left;">DP02_0151PE</td>
<td style="text-align: left;">Percent!!COMPUTERS AND INTERNET USE!!Total Households!!With a computer</td>
<td style="text-align: left;">SELECTED SOCIAL CHARACTERISTICS IN THE UNITED STATES</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">float</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DP02_0152E</td>
<td style="text-align: left;">Estimate!!COMPUTERS AND INTERNET USE!!Total Households!!With a broadband Internet subscription</td>
<td style="text-align: left;">SELECTED SOCIAL CHARACTERISTICS IN THE UNITED STATES</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">int</td>
</tr>
<tr class="even">
<td style="text-align: left;">DP02_0152PE</td>
<td style="text-align: left;">Percent!!COMPUTERS AND INTERNET USE!!Total Households!!With a broadband Internet subscription</td>
<td style="text-align: left;">SELECTED SOCIAL CHARACTERISTICS IN THE UNITED STATES</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">float</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>We obtain similar results but the variable acronym has changed! For 2013 we have “DP02_0151PE”.</p>
</section>
<section id="check-that-the-geography-is-available-in-the-dataset" class="level3" data-number="2.5">
<h3 data-number="2.5" class="anchored" data-anchor-id="check-that-the-geography-is-available-in-the-dataset"><span class="header-section-number">2.5</span> Check that the geography is available in the dataset</h3>
<p>Datasets can break down the estimates in any number of geography boundaries such as state, county, tract, block, zip code area. We need to make sure that our target of state boundaries is available for the “acs/acs1/profile” dataset.</p>
<div class="task">
<p>Check the availability of state geography from the “acs/acs1/profile” dataset.</p>
</div>
<p>We can use <code>RcensusPkg::get_geography()</code> to check if “state” for the dataset and vintage combination is available.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>acs1_2023_geo_dt <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">get_geography</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> <span class="st">"acs/acs1/profile"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">vintage =</span> <span class="dv">2023</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Availability of state geography from acs/acs1/profile, 2023</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">geoLevelDisplay</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">us</td>
<td style="text-align: left;">010</td>
</tr>
<tr class="even">
<td style="text-align: left;">region</td>
<td style="text-align: left;">020</td>
</tr>
<tr class="odd">
<td style="text-align: left;">division</td>
<td style="text-align: left;">030</td>
</tr>
<tr class="even">
<td style="text-align: left;">state</td>
<td style="text-align: left;">040</td>
</tr>
<tr class="odd">
<td style="text-align: left;">county</td>
<td style="text-align: left;">050</td>
</tr>
<tr class="even">
<td style="text-align: left;">county subdivision</td>
<td style="text-align: left;">060</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>The resultant dataframe does have an entry for “state” under the “name” column.</p>
</section>
</section>
<section id="download-the-data" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="download-the-data"><span class="header-section-number">3</span> Download the data</h2>
<p>We have the years and acronym names for the dataset and variable. We’re all set to make a download request for the data.</p>
<div class="task">
<p>Request the state percent of household computers present for the years 2013 and 2023.</p>
</div>
<p>For 2013:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>acs1_computers_data_2013_dt <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">get_vintage_data</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> <span class="st">"acs/acs1/profile"</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">vintage =</span> <span class="dv">2013</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">"DP02_0151PE"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="st">"state:*"</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Rename columns; select columns; convert values to numeric; order the rows by “State”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>acs1_computers_data_2013_dt <span class="ot">&lt;-</span> acs1_computers_data_2013_dt <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">setnames</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">old =</span> <span class="fu">c</span>(<span class="st">"NAME"</span>, <span class="st">"DP02_0151PE"</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">new =</span> <span class="fu">c</span>(<span class="st">"State"</span>, <span class="st">"ComputerPresent"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  .[, .(GEOID, State, ComputerPresent)] <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  .[, ComputerPresent <span class="sc">:</span><span class="er">=</span> <span class="fu">as.numeric</span>(ComputerPresent)] <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">order</span>(State)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For 2023:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>acs1_computers_data_2023_dt <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">get_vintage_data</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> <span class="st">"acs/acs1/profile"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">vintage =</span> <span class="dv">2023</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vars =</span> <span class="st">"DP02_0153PE"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="st">"state:*"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Rename the columns; convert values to numeric:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>acs1_computers_data_2023_dt <span class="ot">&lt;-</span> acs1_computers_data_2023_dt <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">setnames</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">old =</span> <span class="fu">c</span>(<span class="st">"NAME"</span>, <span class="st">"DP02_0153PE"</span>), </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">new =</span> <span class="fu">c</span>(<span class="st">"State"</span>, <span class="st">"ComputerPresent"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  .[, ComputerPresent <span class="sc">:</span><span class="er">=</span> <span class="fu">as.numeric</span>(ComputerPresent)]    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Percent of household computers present across states, 2023</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">State</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ComputerPresent</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">state</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">GEOID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Alabama</td>
<td style="text-align: right;">94.6</td>
<td style="text-align: left;">01</td>
<td style="text-align: left;">01</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alaska</td>
<td style="text-align: right;">97.4</td>
<td style="text-align: left;">02</td>
<td style="text-align: left;">02</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Arizona</td>
<td style="text-align: right;">97.0</td>
<td style="text-align: left;">04</td>
<td style="text-align: left;">04</td>
</tr>
<tr class="even">
<td style="text-align: left;">Arkansas</td>
<td style="text-align: right;">95.0</td>
<td style="text-align: left;">05</td>
<td style="text-align: left;">05</td>
</tr>
<tr class="odd">
<td style="text-align: left;">California</td>
<td style="text-align: right;">97.2</td>
<td style="text-align: left;">06</td>
<td style="text-align: left;">06</td>
</tr>
<tr class="even">
<td style="text-align: left;">Colorado</td>
<td style="text-align: right;">97.7</td>
<td style="text-align: left;">08</td>
<td style="text-align: left;">08</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</section>
<section id="join-the-state-percentages-with-the-state-boundary-geometries" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="join-the-state-percentages-with-the-state-boundary-geometries"><span class="header-section-number">4</span> Join the state percentages with the state boundary geometries</h2>
<p>We can use <code>RcensusPkg::plot_us_data()</code> to create a choropleth map that joins both the percentage data with state boundary geometries. The function requires a local directory for the download of the US state boundary shapefiles from the Census Bureau.</p>
<p>Define an output directory for the state shapefiles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>output_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">here</span>(), <span class="st">"shapefiles"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A choropleth map for computers present in 2013 across the states:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>computers_2013_lst <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">plot_us_data</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> acs1_computers_data_2013_dt[<span class="sc">!</span>(State <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Alaska"</span>,<span class="st">"Hawaii"</span>,<span class="st">"Puerto Rico"</span>)),],</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">states_col =</span> <span class="st">"State"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value_col =</span> <span class="st">"ComputerPresent"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_dir =</span> output_dir,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"2013 Computers Present"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale_breaks =</span> <span class="fu">seq</span>(<span class="dv">70</span>,<span class="dv">100</span>,<span class="dv">5</span>),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale_labels =</span> <span class="fu">seq</span>(<span class="dv">70</span>,<span class="dv">100</span>,<span class="dv">5</span>),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale_limits =</span> <span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">100</span>),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend_key_width =</span> <span class="dv">1</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">display_plot =</span> <span class="cn">FALSE</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A choropleth map for computers present in 2023 across the states:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>computers_2023_lst <span class="ot">&lt;-</span> RcensusPkg<span class="sc">::</span><span class="fu">plot_us_data</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> acs1_computers_data_2023_dt[<span class="sc">!</span>(State <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Alaska"</span>,<span class="st">"Hawaii"</span>,<span class="st">"Puerto Rico"</span>)),],</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">states_col =</span> <span class="st">"State"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value_col =</span> <span class="st">"ComputerPresent"</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">output_dir =</span> output_dir,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"2023 Computers Present"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale_breaks =</span> <span class="fu">seq</span>(<span class="dv">70</span>,<span class="dv">100</span>,<span class="dv">5</span>),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale_labels =</span> <span class="fu">seq</span>(<span class="dv">70</span>,<span class="dv">100</span>,<span class="dv">5</span>),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale_limits =</span> <span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">100</span>),</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">display_plot =</span> <span class="cn">FALSE</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="compare-the-choropleth-map-for-computers-present-in-2013-with-2023" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="compare-the-choropleth-map-for-computers-present-in-2013-with-2023"><span class="header-section-number">5</span> Compare the choropleth map for computers present in 2013 with 2023</h2>
<p>Using <code>RplotterPkg::multi_panel_grid()</code> we can combine the maps into one panel for making a comparison:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>plot_lst <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  computers_2013_lst<span class="sc">$</span>plots<span class="sc">$</span>lower_48, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  computers_2023_lst<span class="sc">$</span>plots<span class="sc">$</span>lower_48</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>layout <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">plots =</span> plot_lst,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">rows =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>RplotterPkg<span class="sc">::</span><span class="fu">multi_panel_grid</span>(</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">layout =</span> layout,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_width =</span> <span class="dv">20</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_height =</span> <span class="dv">14</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Computers Present 2013 - 2023"</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot_titles =</span> <span class="fu">c</span>(<span class="st">"Year: 2013"</span>,<span class="st">"Year:2023"</span>)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="1728"></p>
<figcaption>Percent of Computers Present in 2013/2023</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="conclusion" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">6</span> Conclusion</h2>
<p>We have attempted to outline an approach when accessing the Census Bureau’s API. Knowing some of the “gotsha’s” and utilizing a few of the functions in <a href="https://github.com/deandevl/RcensusPkg">RcensusPkg</a> could possibly help in a successful study.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>